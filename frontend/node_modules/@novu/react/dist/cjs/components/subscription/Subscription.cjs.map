{"version":3,"sources":["../../../../src/components/subscription/Subscription.tsx"],"sourcesContent":["import { SubscriptionLocalization } from '@novu/js/ui';\nimport React, { useMemo } from 'react';\nimport { useNovu } from '../../hooks/NovuProvider';\nimport { ReactSubscriptionAppearance } from '../../utils/types';\nimport { NovuUI, NovuUIOptions } from '../NovuUI';\nimport { withRenderer } from '../Renderer';\nimport { DefaultSubscription, DefaultSubscriptionProps } from './DefaultSubscription';\n\ntype BaseSubscriptionProps = {\n  localization?: SubscriptionLocalization;\n  appearance?: ReactSubscriptionAppearance;\n} & Pick<NovuUIOptions, 'container'>;\n\ntype SubscriptionPropsWithChildren = {\n  children?: React.ReactNode;\n} & Exclude<DefaultSubscriptionProps, 'renderPreferences'> &\n  BaseSubscriptionProps;\n\ntype SubscriptionPropsWithoutChildren = {\n  children?: never;\n} & DefaultSubscriptionProps &\n  BaseSubscriptionProps;\n\nexport type SubscriptionProps = SubscriptionPropsWithChildren | SubscriptionPropsWithoutChildren;\n\nconst SubscriptionInternal = withRenderer<SubscriptionProps>((props) => {\n  const { container, localization, appearance, ...defaultSubscriptionProps } = props;\n  const novu = useNovu();\n\n  const options: NovuUIOptions = useMemo(() => {\n    return {\n      container,\n      localization,\n      appearance,\n      options: novu.options,\n    };\n  }, [localization, appearance, container, novu.options]);\n\n  if (isWithChildrenProps(props)) {\n    const clonedChildren = React.Children.map(props.children, (child) => {\n      if (React.isValidElement(child)) {\n        return React.cloneElement(child, {\n          ...child.props,\n          topicKey: defaultSubscriptionProps.topicKey,\n          identifier: defaultSubscriptionProps.identifier,\n          preferences: defaultSubscriptionProps.preferences,\n        });\n      }\n\n      return child;\n    });\n\n    return (\n      <NovuUI options={options} novu={novu}>\n        {clonedChildren}\n      </NovuUI>\n    );\n  }\n\n  return (\n    <NovuUI options={options} novu={novu}>\n      <DefaultSubscription {...defaultSubscriptionProps} />\n    </NovuUI>\n  );\n});\n\nSubscriptionInternal.displayName = 'SubscriptionInternal';\n\nexport const Subscription = React.memo((props: SubscriptionProps) => {\n  return <SubscriptionInternal {...props} />;\n});\n\nfunction isWithChildrenProps(props: SubscriptionProps): props is SubscriptionPropsWithChildren {\n  return 'children' in props;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAA+B;AAC/B,0BAAwB;AAExB,oBAAsC;AACtC,sBAA6B;AAC7B,iCAA8D;AA+CxD;AA5BN,IAAM,2BAAuB,8BAAgC,CAAC,UAAU;AACtE,QAAM,EAAE,WAAW,cAAc,YAAY,GAAG,yBAAyB,IAAI;AAC7E,QAAM,WAAO,6BAAQ;AAErB,QAAM,cAAyB,sBAAQ,MAAM;AAC3C,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAS,KAAK;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,cAAc,YAAY,WAAW,KAAK,OAAO,CAAC;AAEtD,MAAI,oBAAoB,KAAK,GAAG;AAC9B,UAAM,iBAAiB,aAAAA,QAAM,SAAS,IAAI,MAAM,UAAU,CAAC,UAAU;AACnE,UAAI,aAAAA,QAAM,eAAe,KAAK,GAAG;AAC/B,eAAO,aAAAA,QAAM,aAAa,OAAO;AAAA,UAC/B,GAAG,MAAM;AAAA,UACT,UAAU,yBAAyB;AAAA,UACnC,YAAY,yBAAyB;AAAA,UACrC,aAAa,yBAAyB;AAAA,QACxC,CAAC;AAAA,MACH;AAEA,aAAO;AAAA,IACT,CAAC;AAED,WACE,4CAAC,wBAAO,SAAkB,MACvB,0BACH;AAAA,EAEJ;AAEA,SACE,4CAAC,wBAAO,SAAkB,MACxB,sDAAC,kDAAqB,GAAG,0BAA0B,GACrD;AAEJ,CAAC;AAED,qBAAqB,cAAc;AAE5B,IAAM,eAAe,aAAAA,QAAM,KAAK,CAAC,UAA6B;AACnE,SAAO,4CAAC,wBAAsB,GAAG,OAAO;AAC1C,CAAC;AAED,SAAS,oBAAoB,OAAkE;AAC7F,SAAO,cAAc;AACvB;","names":["React"]}