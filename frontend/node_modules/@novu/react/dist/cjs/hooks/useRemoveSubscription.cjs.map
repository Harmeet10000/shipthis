{"version":3,"sources":["../../../src/hooks/useRemoveSubscription.ts"],"sourcesContent":["import { BaseDeleteSubscriptionArgs, NovuError, DeleteSubscriptionArgs as RemoveSubscriptionArgs } from '@novu/js';\nimport { useCallback, useRef, useState } from 'react';\nimport { useNovu } from './NovuProvider';\n\nexport type UseRemoveSubscriptionProps = {\n  onSuccess?: () => void;\n  onError?: (error: NovuError) => void;\n};\n\ntype RemoveResult = Promise<{\n  error?: NovuError;\n}>;\n\nexport type UseRemoveSubscriptionResult = {\n  isRemoving: boolean;\n  error?: NovuError;\n  remove: (args: RemoveSubscriptionArgs) => RemoveResult;\n};\n\nexport const useRemoveSubscription = (props: UseRemoveSubscriptionProps = {}): UseRemoveSubscriptionResult => {\n  const propsRef = useRef<UseRemoveSubscriptionProps>(props);\n  propsRef.current = props;\n  const novu = useNovu();\n  const [isRemoving, setIsRemoving] = useState(false);\n  const [error, setError] = useState<NovuError>();\n\n  const removeCallback = useCallback(\n    async (args: RemoveSubscriptionArgs): RemoveResult => {\n      const { onSuccess, onError } = propsRef.current;\n      setError(undefined);\n      setIsRemoving(true);\n\n      const response = await novu.subscriptions.delete(args as BaseDeleteSubscriptionArgs);\n\n      setIsRemoving(false);\n\n      if (response.error) {\n        setError(response.error);\n        onError?.(response.error);\n      } else if (response.data) {\n        onSuccess?.();\n      }\n\n      return response;\n    },\n    [novu]\n  );\n\n  return {\n    remove: removeCallback,\n    isRemoving,\n    error,\n  };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAA8C;AAC9C,0BAAwB;AAiBjB,IAAM,wBAAwB,CAAC,QAAoC,CAAC,MAAmC;AAC5G,QAAM,eAAW,qBAAmC,KAAK;AACzD,WAAS,UAAU;AACnB,QAAM,WAAO,6BAAQ;AACrB,QAAM,CAAC,YAAY,aAAa,QAAI,uBAAS,KAAK;AAClD,QAAM,CAAC,OAAO,QAAQ,QAAI,uBAAoB;AAE9C,QAAM,qBAAiB;AAAA,IACrB,OAAO,SAA+C;AACpD,YAAM,EAAE,WAAW,QAAQ,IAAI,SAAS;AACxC,eAAS,MAAS;AAClB,oBAAc,IAAI;AAElB,YAAM,WAAW,MAAM,KAAK,cAAc,OAAO,IAAkC;AAEnF,oBAAc,KAAK;AAEnB,UAAI,SAAS,OAAO;AAClB,iBAAS,SAAS,KAAK;AACvB,2CAAU,SAAS;AAAA,MACrB,WAAW,SAAS,MAAM;AACxB;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAAA,IACA,CAAC,IAAI;AAAA,EACP;AAEA,SAAO;AAAA,IACL,QAAQ;AAAA,IACR;AAAA,IACA;AAAA,EACF;AACF;","names":[]}